<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/home.css">
</head>
<body>
    <!-- Overlay per chiudere il menu -->
    <div id="overlay" class="overlay" onclick="closeMenu()"></div>

    <!-- Menu Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="Cerca tra gli articoli..." onkeyup="searchArticles()">
            <img src="immagini/icons8-ricerca-60.png" alt="cerca" class="search-icon" onclick="toggleSearch()">
        </div>
        <div id="searchResults" class="search-results"></div>
        <a href="#">FASHION</a>
        <a href="#">BEAUTY AND WELLNESS</a>
        <a href="#">ART</a>
        <a href="#">SHOP</a>
        <div class="basso">
        <a href="#">ABOUT</a>
        <a href="#">SUBMISSION</a>
        <a href="#">CONTACT</a>
        </div>
    </div>

    <main>
        <immagine_iniziale>
            <nav>
                <ul>
                    <destra>
                        <img id="menuIcon" src="immagini/icons8-menu-50.png" alt="menu" style="height: 30px; width: 30px;" onclick="openMenu()">
                    </destra>
                    <sinistra>
                        <a href="https://www.instagram.com" target="_blank"><img src="immagini/icons8-instagram-48.png" alt="instagram"></a>
                        <a href="https://www.tiktok.com" target="_blank"><img src="immagini/icons8-tiktok.png" alt="tiktok"></a>
                        <a href="https://www.pinterest.com" target="_blank"><img src="immagini/icons8-pinterest-50.png" alt="pinterest"></a>
                    </sinistra>
                </ul>
            </nav>
            <img src="immagini/imma-instagram-1548329109.jpg.avif" alt="Immagine Iniziale">
            <span class="titolo">Corebody</span>
        </immagine_iniziale>
        <section class="latest-section">
            <h1 class="latest-title">LATEST</h1>
            
            <div class="articles-grid" id="articlesGrid">
                <!-- Articoli caricati dinamicamente dal JSON -->
            </div>
        </section>
        <section class="chiusa">
            <div class="sezione_finale">
            <div class="scritta_centro">
                Corebody
            <div class="basso">
                <a href="#">ABOUT</a>
                <a href="#">SUBMISSION</a>
                <a href="#">CONTACT</a>
                </div>
            </div>
            <div class="sotto" >
                        <a href="https://www.instagram.com" target="_blank"><img src="immagini/icons8-instagram-48.png" alt="instagram"></a>
                        <a href="https://www.tiktok.com" target="_blank"><img src="immagini/icons8-tiktok.png" alt="tiktok"></a>
                        <a href="https://www.pinterest.com" target="_blank"><img src="immagini/icons8-pinterest-50.png" alt="pinterest"></a>
            </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 Corebody. Tutti i diritti riservati.</p>
    </footer>
    </main>
<script>
// Variabile globale per gli articoli
var articoliData = [];

// Carica gli articoli dal JSON
fetch('articoli.json')
    .then(response => response.json())
    .then(articoli => {
        articoliData = articoli;
        var grid = document.getElementById('articlesGrid');
        
        articoli.forEach(function(art) {
            grid.innerHTML += `
                <article class="article-card" data-id="${art.id}" onclick="window.location='articolo.html?id=${art.id}'" style="cursor: pointer;">
                    <img src="${art.immagine}" alt="${art.categoria}" class="article-image">
                    <div class="article-content">
                        <h3 class="article-category">${art.categoria}</h3>
                        <p class="article-date">${art.data}</p>
                        <h2 class="article-title">${art.titolo}</h2>
                        <p class="article-text">${art.anteprima}</p>
                    </div>
                </article>
            `;
        });
    })
    .catch(error => console.error('Errore nel caricamento degli articoli:', error));

function openMenu() {
    document.getElementById("sidebar").style.width = "350px";
    document.getElementById("overlay").style.display = "block";
    document.getElementById("menuIcon").style.opacity = "0";
}

function closeMenu() {
    document.getElementById("sidebar").style.width = "0";
    document.getElementById("overlay").style.display = "none";
    document.getElementById("menuIcon").style.opacity = "1";
    document.getElementById("searchInput").style.display = "none";
    document.getElementById("searchInput").value = "";
    document.getElementById("searchResults").innerHTML = "";
}

function toggleSearch() {
    var searchInput = document.getElementById("searchInput");
    if (searchInput.style.display === "none" || searchInput.style.display === "") {
        searchInput.style.display = "block";
        searchInput.focus();
    } else {
        searchInput.style.display = "none";
        searchInput.value = "";
        document.getElementById("searchResults").innerHTML = "";
    }
}

function searchArticles() {
    var input = document.getElementById("searchInput").value.toLowerCase();
    var resultsContainer = document.getElementById("searchResults");
    resultsContainer.innerHTML = "";
    
    if (input.length < 2) {
        return;
    }
    
    // Cerca negli articoli dal JSON
    var foundArticles = articoliData.filter(function(art) {
        return art.titolo.toLowerCase().includes(input) || 
               art.categoria.toLowerCase().includes(input) || 
               art.anteprima.toLowerCase().includes(input) ||
               art.contenuto.toLowerCase().includes(input);
    });
    
    if (foundArticles.length === 0) {
        resultsContainer.innerHTML = "<p class='no-results'>Nessun risultato trovato</p>";
        return;
    }
    
    // Mostra massimo 3 risultati
    var maxResults = Math.min(foundArticles.length, 3);
    for (var i = 0; i < maxResults; i++) {
        var art = foundArticles[i];
        var resultItem = document.createElement("a");
        resultItem.href = "articolo.html?id=" + art.id;
        resultItem.className = "search-result-item";
        resultItem.textContent = art.titolo + " (" + art.categoria + ")";
        resultsContainer.appendChild(resultItem);
    }
    
    // Se ci sono più di 3 risultati, mostra "di più"
    if (foundArticles.length > 3) {
        localStorage.setItem('searchResults', JSON.stringify(foundArticles));
        
        var moreLink = document.createElement("a");
        moreLink.href = "ricerca.html";
        moreLink.className = "search-more-link";
        moreLink.textContent = "di più (" + (foundArticles.length - 3) + " altri)";
        resultsContainer.appendChild(moreLink);
    }
}
</script>
</body>
</html>
